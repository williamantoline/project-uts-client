<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detail | Godzilla vs. Kong</title>
    <link rel="stylesheet" href="movie.css">
  </head>
  <body>
    <div class="container" id="container"></div>

    <script>
      const container = document.querySelector("#container")

      const data = {
        "budget": 200000000,
        "genres": ["Action", "Science Fiction"],
        "homepage": "https://www.godzillavskong.net",
        "id": 399566,
        "original_language": "English",
        "overview": "In a time when monsters walk the Earth, humanity’s fight for its future sets Godzilla and Kong on a collision course that will see the two most powerful forces of nature on the planet collide in a spectacular battle for the ages.",
        "popularity": 10755.513,
        "poster_path": "/pgqgaUx1cJb5oZQQ5v0tNARCeBp.jpg",
        "release_date": "2021-03-24",
        "revenue": 298573106,
        "runtime": 113,
        "tagline": "One Will Fall",
        "title": "Godzilla vs. Kong",
        "vote_average": 8.4,
        "vote_count": 4108,
        "external_ids": {
          "imdb_id": "tt5034838",
          "facebook_id": "GodzillaVsKong",
          "instagram_id": "godzillavskong",
          "twitter_id": "GodzillavsKong"
        },
        "similar": [
          { "id": 15767, "title": "Godzilla: Final Wars" },
          { "id": 929, "title": "Godzilla" },
          { "id": 12636, "title": "Godzilla Against MechaGodzilla" },
          { "id": 18983, "title": "Godzilla, King of the Monsters!" },
          { "id": 315011, "title": "Shin Godzilla" },
          { "id": 36679, "title": "Godzilla vs. King Ghidorah" },
          { "id": 18289, "title": "Godzilla vs. Biollante" },
          { "id": 268896, "title": "Pacific Rim: Uprising" },
          { "id": 536115, "title": "Godzilla: The Planet Eater" },
          { "id": 1678, "title": "Godzilla" },
          { "id": 254, "title": "King Kong" },
          { "id": 7191, "title": "Cloverfield" },
          { "id": 68726, "title": "Pacific Rim" },
          { "id": 293167, "title": "Kong: Skull Island" },
          { "id": 19333, "title": "Terror of Mechagodzilla" },
          { "id": 26947, "title": "Gamera vs. Guiron" },
          { "id": 803386, "title": "The Legend of King Kong" },
          { "id": 19742, "title": "Rodan" },
          { "id": 54433, "title": "Gamera: Guardian of the Universe" },
          {
            "id": 39468,
            "title": "Godzilla vs. Megaguirus: The G Extermination Strategy"
          }
        ],
        "certification": "PG-13",
        "directors": [{ "id": 98631, "name": "Adam Wingard" }],
        "writers": [
          { "id": 1706, "name": "Terry Rossio" },
          { "id": 11012, "name": "Michael Dougherty" },
          { "id": 579281, "name": "Eric Pearson" },
          { "id": 1080778, "name": "Max Borenstein" },
          { "id": 1443683, "name": "Zach Shields" }
        ],
        "cast": [
          { "id": 28846, "name": "Alexander Skarsgård" },
          { "id": 1356210, "name": "Millie Bobby Brown" },
          { "id": 15556, "name": "Rebecca Hall" }
        ],
        "trailer_yt": "odM92ap8_c0"
      }

    
      const buildElement = (tag, meta = {}, inner = "") => {
        let _tag = document.createElement(tag);
        Object.keys(meta).forEach(key => {
          let val = meta[key];
          _tag.setAttribute(key, val);
        });
        _tag.innerHTML = inner;
        return _tag;
      }


      const createHeaderComponent = () => {
        _img = buildElement("img", {"src": "assets/ic_arrow_left.svg", "alt": "<"});
        _span = buildElement("span", {}, "Back");
        _div = buildElement("div");
        _div.appendChild(_img);
        _div.appendChild(_span);
        _a = buildElement("a", {"href": "index.html"}, "");
        _a.appendChild(_div);
        _div_left = buildElement("div", {"class": "left"});
        _div_left.appendChild(_a);

        _h_one = buildElement("h1", {"class": "movie-title"}, data.title);
        _div_center = buildElement("div", {"class": "center"});
        _div_center.appendChild(_h_one);

        _div_right = buildElement("div", {"class": "right"});

        _div_header = buildElement("div", {"class": "header"});
        _div_header.appendChild(_div_left);
        _div_header.appendChild(_div_center);
        _div_header.appendChild(_div_right);

        return _div_header;
      }


      const createPicComponent = () => {

        _div_pic = buildElement("div", {"class": "movie-pic"});
        _img = buildElement("img", {"class": "img", "src": `https://image.tmdb.org/t/p/original${data.poster_path}`});
        _h_four = buildElement("h4", {"class": "text-bold mb-6"}, data.title);
        _year = buildElement("span", {"class": "text-light"}, ` (${data.release_date.split("-")[0]})`);
        _h_four.appendChild(_year);
        _p_one = buildElement("p", {"class": "text-gray text-bold"}, `${data.certification} | ${data.release_date} | ${data.original_language}`);
        _div_pic.appendChild(_img);
        _div_pic.appendChild(_h_four);
        _div_pic.appendChild(_p_one);

        return _div_pic;
      }


      const createOverviewComponent = () => {
        _div_overview = buildElement("div", {"class": "overview"});
        _h_three = buildElement("h3", {"class": "text-bold overview-label"}, "Overview");
        _p = buildElement("p", {"class": "text-gray text-bold overview-content"}, data.overview);
        _div_overview.appendChild(_h_three)
        _div_overview.appendChild(_p)

        return _div_overview;
      }


      const createPeopleComponent = (data, label) => {
        _people_group = buildElement("div", {"class": "people-group"});

        for (let i=0; i<data.length; i++) {
          _h4 = buildElement("h4", {}, data[i].name);
          _p = buildElement("p", {"class": "text-gray"}, label);
          _div = buildElement("div", {"class": "people"});
          _div.appendChild(_h4);
          _div.appendChild(_p);
          
          _people_group.appendChild(_div);
        }

        return _people_group;
      }


      const buildItem = (data) => {
        _div_header = createHeaderComponent();
        _div_pic = createPicComponent();
        _div_overview = createOverviewComponent();
        
        _directors = createPeopleComponent(data.directors, "Director");
        _writers = createPeopleComponent(data.writers, "Writer");
        _casts = createPeopleComponent(data.cast, "Cast");

        _div_movie_detail = buildElement("div", {"class": "movie-detail"});
        _div_movie_detail.appendChild(_directors);
        _div_movie_detail.appendChild(_writers);
        _div_movie_detail.appendChild(_casts);
        
        container.appendChild(_div_header);
        container.appendChild(_div_pic);
        container.appendChild(_div_overview);
        container.appendChild(_div_movie_detail);
      }

      buildItem(data);
      
    </script>
  </body>
</html>